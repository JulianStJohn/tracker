<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">
    <title>Food Tracker</title>
    <link rel="stylesheet" href="/css/tracker.css">
</head>
<body>
    <div id="page-container">
        <div id="navbar">
            <div class="navbar-title">Tracker</div>
            <button class="navbar-tab active" id="tab-day" data-location="index.html" type="button" role="tab" aria-selected="true">Day</button>
            <div class="navbar-spacer">&nbsp;</div>
            <button class="navbar-link" id="logout" type="button">Logout</button> 
        </div>

        <h1>Today's Food Tracker</h1>

        <ul id="dayList">
            <li>Loading today's food tracking data...</li>
        </ul>
    </div>

    <script type="module">
        // Set up navbar functionality
        const dayTab = document.getElementById('tab-day');
        if (dayTab) {
            dayTab.addEventListener('click', function() {
                window.location.href = '/';
            });
        }

        const logoutBtn = document.getElementById('logout');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function() {
                window.location.href = '/auth/logout';
            });
        }

        // Fetch today's day entry
        fetch('/day/today')
            .then(response => response.json())
            .then(day => {
                const dayList = document.getElementById('dayList');
                dayList.innerHTML = `<li>Date: ${day.yyyymmdd}</li>`;
            })
            .catch(error => {
                console.error('Error fetching day:', error);
                const dayList = document.getElementById('dayList');
                dayList.innerHTML = '<li>Error loading day entry</li>';
            });
    </script>
</body>
</html>
